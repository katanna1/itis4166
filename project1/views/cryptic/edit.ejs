<!-- Edit a Product Page -->

<%- include('../partials/header.ejs')%>
    <div class = "content">
        <h2>Edit Your Post:</h2>
        <p>Make any revisions to your listing below. Product image will stay the same unless a new valid image is uploaded.</p>    
        <form method="POST" action="/products/<%= product.id %>?_method=PUT" class="form-container" enctype="multipart/form-data">
            <!-- Title Field -->
            <label for="title">Title</label>
            <input type="text" id="title" name="title" value="<%= product.title %>" required>

            <!-- Condition Dropdown -->
            <label for="condition">Condition</label>
            <select id="condition" name="condition" required>
                <option value="New" <%= product.condition === 'New' ? 'selected' : '' %>>New</option>
                <option value="Like New" <%= product.condition === 'Like New' ? 'selected' : '' %>>Like New</option>
                <option value="Good" <%= product.condition === 'Good' ? 'selected' : '' %>>Good</option>
                <option value="Fair" <%= product.condition === 'Fair' ? 'selected' : '' %>>Fair</option>
                <option value="Poor" <%= product.condition === 'Poor' ? 'selected' : '' %>>Poor</option>
            </select>

            <!-- Price Field -->
            <label for="price">Price</label>
            <input type="number" id="price" name="price" min="0" step="0.01" value="<%= product.price %>" required>

            <!-- Details Field -->
            <label for="details">Description</label>
            <textarea rows="5" id="description" name="description" minlength="10" class="fixed-width" required><%= product.description %></textarea>

            <!-- Image Upload Field (existing image + option to upload new) -->
            <label for="image">Image</label>
            <input type="file" id="image" name="image" accept="image/*">
            <p>Current Image:</p>
            <img src="<%= product.imageUrl %>" alt="<%= product.title %>" style="max-width: 200px; height: auto;" />

            <!-- Submit Button --> <br> <br>
            <input class="new-button" type="submit" value="Submit">
        </form>
    </div>
<%- include('../partials/footer.ejs')%>
